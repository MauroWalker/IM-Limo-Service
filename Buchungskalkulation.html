<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Buchen Formular etc.</title>
<script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=AIzaSyAE-xBl-Wl-jZGSbwYQPA1bW2cTalKZ_pg" type="text/javascript"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>

    <style>
      #map {
        width: 50px;
        height: 40px;
      }
    </style>


</head>

<body>
Buchungskonditionen:

<br>
Für alle unsere Fahrzeuge berechnen wir Fr. 3.50 pro gefahrenen Kilometer.
<br>
Ab einer Fahrt von 100 Kilometer berechnen wir noch Fr. 3.- pro gefahrenen Kilometer.
<br>
Mit dem Luxuspaket buchen Sie zusätzlich zwei Flaschen Champagner für die Fahrt. Kosten: Fr. 120.-
<br>
Wir empfehlen unsere Zusatzversicherung. Im Falle von Sachschäden wir Ihnen bei einer Buchung der Zusatzversicherung für die Reperatur nichts angerechnet.
<br>
Pro Buchung berechnen wir zudem 90 als Pauschale.

<p>Buchungskalkulation:</p>

Abholung von: <form> <input type="text" id="source">
<br>
Reiseziel: 
<br>
 <input type="text" id="destination">

<p>
  <label>
    <input type="checkbox" name="CheckboxGroup1" value="kontrollkästchen" id="einweg">
    nur ein Weg</label>
  <br>
  <label>
    <input type="checkbox" name="CheckboxGroup1_" value="kontrollkästchen" id="luxuspaket">
    Luxuspaket</label>
  <br>
  <label>
      <input type="checkbox" name="CheckboxGroup1_" value="kontrollkästchen" id="versicherung">
    Zusatzversicherung</label>
  <br>
  <br>
  
<input type="button" value="Berechnen" id="berechnen">

<p id="Offerte"></p>

</form>


<script>
var origin = 'yes';




// Einbindung der Map von Google
      function initMap() {
		// Map Start ohne Marker
		if (origin = 'yes') {
        var mapDiv = document.getElementById('map');
        var map = new google.maps.Map(mapDiv, {
          center: {lat: 46.947974, lng: 7.447447},
          zoom: 8
        });
		}
		// Marker werden nach dem klicken auf "Berechnen" hinzugefügt
		else {
		alert (Ok)
			
		}
      }
// Einbindung der Map von Google




// Berechnung der Distanz von Punkt A (source) nach Punkt B (destination).

$('#berechnen').click(function() {
  origin = document.getElementById('source').value; //Get the source string
  destination = document.getElementById('destination').value; //Get the destination string
  var service = new google.maps.DistanceMatrixService(); //initialize the distance service
  service.getDistanceMatrix(
    {
      origins: [origin], //set origin, you can specify multiple sources here
      destinations: [destination],//set destination, you can specify multiple destinations here
      travelMode: google.maps.TravelMode.DRIVING, //set the travelmode
      unitSystem: google.maps.UnitSystem.METRIC,//The unit system to use when displaying distance
      avoidHighways: false,
      avoidTolls: false
    }, calcDistance); // here calcDistance is the call back function

 
	

});

function calcDistance(response, status) {
  if (status != google.maps.DistanceMatrixStatus.OK) { // check if there is valid result
    alert('Error was: ' + status);
  } else {
    var origins = response.originAddresses;
    var destinations = response.destinationAddresses;
	
    for (var i = 0; i < origins.length; i++) {
      var results = response.rows[i].elements;
      for (var j = 0; j < results.length; j++) {
		  distanz = parseFloat(results[j].distance.text)
		  

	if (distanz < 100) {
		var fahrkosten = distanz*3*2;
	} else {
		var fahrkosten = distanz*3.5*2;
	}
	if ($('#einweg').is(':checked')) {
		var fahrkosten = fahrkosten/2;
	}
	
	
	
		
	var element = document.getElementById("Offerte");
    element.innerHTML = "Die Fahrtkosten betragen " + fahrkosten + " CHF. Die Gesamtkosten belaufen sich auf " + (fahrkosten+90);
	
		
		
		
		
		
      }
    }
  }
}
// Ende Berechnung der Distanz von Punkt A (source) nach Punkt B (destination).




</script>




   <div id="map"></div>

    <script src="https://maps.googleapis.com/maps/api/js?callback=initMap"
        async defer></script>

</body>
</html>
