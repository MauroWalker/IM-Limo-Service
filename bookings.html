<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bock auf Limo</title>
<link href="css/bootstrap.css" rel="stylesheet" type="text/css">
<link href="css/customtheme.css" rel="stylesheet" type="text/css">

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<script src="js/jquery-1.11.2.min.js" type="text/javascript"></script>
<script src="js/bootstrap.js" type="text/javascript"></script>
<script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=AIzaSyAE-xBl-Wl-jZGSbwYQPA1bW2cTalKZ_pg" type="text/javascript"></script>
<link href='https://fonts.googleapis.com/css?family=Cinzel' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Abel' rel='stylesheet' type='text/css'>

<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

    <style>
      #map {
        width: 400px;
        height: 400px;
      }
      
      #erneut {
	      display: none;
      }
    </style>

</head>



<body style="padding-top: 70px">
<!-- Navbar anfang -->
<nav class="navbar navbar-default navbar-fixed-top">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#topFixedNavbar1"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button>
      <a class="navbar-brand" href="index.html"><i class="fa fa-lemon-o"></i> Bock auf Limo</a> 
      
      <div class="hidden-md hidden-sm hidden-lg hidden-xl pull-right">
	      

	     <a class="navbar-brand" href="angebot.html"><i class="fa fa-car" ></i></a>
	     <a class="navbar-brand" href="bookings.html"><i class="fa fa-map-signs" ></i></a>
	     <a class="navbar-brand" href="kontakt.html"><i class="fa fa-comments"></i></a>
	     <a class="navbar-brand" href="about.html"><i class="fa fa-user"></i></a>   
      </div>       
     	 </div> 
     	     
    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="topFixedNavbar1">
      <ul class="nav navbar-nav">
      <li>
        <li class=""><a href="angebot.html">Angebot<span class="sr-only">(current)</span></a></li>
        <li><a href="bookings.html">Buchen</a></li>
        <li class="dropdown hidden-sm"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Fahrzeuge<span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="stretch.html">Stretch-Limonusinen</a></li>
            <li class="divider"></li>
            <li><a href="business.html">Business-Limousinen</a></li>
            <li class="divider"></li>
            <li><a href="specials.html">Specials</a></li>
            <li class="divider"></li>
            <li><a href="kutschen.html">Kutschen</a></li>
          </ul>
        </li>
      </ul>

      <ul class="nav navbar-nav navbar-right">
              <li><a href="about.html">Über Uns</a></li>
        <li><a href="kontakt.html">Kontakt</a></li>
        <li><a href="dokumentation.html">Dokumentation</a></li>

            <li><form class="navbar-form hidden-xs" role="search">


      </ul>
    </div>
    <!-- /.navbar-collapse -->
  </div>
  <!-- /.container-fluid -->
</nav>
<!-- Navbar ende -->
<div class="container">


<div class="col-md-5">

<h2>Buchungskalkulation:</h2>

 <form>
<div class="input-group">
   <span class="input-group-addon" id="basic-addon2">Abholung:</span>
  <input type="text" id="source" class="form-control" placeholder="Adresse, Ort" aria-describedby="basic-addon2">
 </div>
 
 <br>
 
 <div class="input-group">
   <span class="input-group-addon" id="basic-addon2">Reiseziel:</span>
  <input type="text" id="destination" class="form-control" placeholder="Adresse, Ort" aria-describedby="basic-addon2">
 </div>
 


<p> </p>
  <label>
    <input type="checkbox" name="CheckboxGroup1" value="kontrollkästchen" id="einweg">
    Ohne Rückfahrt</label>
  <br>
  <label>
    <input type="checkbox" name="CheckboxGroup1_" value="kontrollkästchen" id="luxuspaket">
    Luxuspaket</label>
  <br>
  <label>
      <input type="checkbox" name="CheckboxGroup1_" value="kontrollkästchen" id="versicherung">
    Zusatzversicherung</label>
  <br>

<p id="Offerte"></p>

<input type="button" value="Berechnen" id="berechnen">
<input type="button" value="Neu Berechnen" id="erneut">



</form>
</div>

<div class="col-md-1">
</div>


<div class="col-md-6">
<h2>Buchungskonditionen:</h2>

<ul>

<li> Alle Fahrzeuge: Fr. 3.50 pro gefahrenen km. </li>

<li>Ab 100 km berechnen wir noch Fr. 3.- pro gefahrenen km. </li>

<li>Luxuspaket: Kosten: Fr. 120.-<br>2 Flaschen Champagner für unterwegs.  </br></li>

<li>Wir empfehlen unsere Zusatzversicherung: Kosten: Fr. 100.-<br>Ohne Zusatzversicherung haften Sie für allfällige Reperaturen.</br> </li>

<li>Pro Buchung berechnen wir zudem Fr. 90.- als Pauschale. </li>

</ul>

<p> </p>

<div id="map"></div>

</div>

<script>
var origin = 'yes';
var zusatzkosten = 90;
var zusatzkostentext = ["Pauschalkosten (90.-)"];




// Einbindung der Map von Google - wird nicht angezeigt, da display: none;
      function initMap() {
		// Map Start ohne Marker
		if (origin = 'yes') {
        var mapDiv = document.getElementById('map');
        var map = new google.maps.Map(mapDiv, {
          center: {lat: 46.947974, lng: 7.447447},
          zoom: 8
        });
		}
		else {
		alert (Ok)
			
		}
      }
// Einbindung der Map von Google - wird nicht angezeigt, da display: none;




// Berechnung der Distanz von Punkt A (source) nach Punkt B (destination).

$('#berechnen').click(function() {
  origin = document.getElementById('source').value; //Get the source string
  destination = document.getElementById('destination').value; //Get the destination string
  var service = new google.maps.DistanceMatrixService(); //initialize the distance service
  service.getDistanceMatrix(
    {
      origins: [origin], //set origin, you can specify multiple sources here
      destinations: [destination],//set destination, you can specify multiple destinations here
      travelMode: google.maps.TravelMode.DRIVING, //set the travelmode
      unitSystem: google.maps.UnitSystem.METRIC,//The unit system to use when displaying distance
      avoidHighways: false,
      avoidTolls: false
    }, calcDistance); // here calcDistance is the call back function
     $("#berechnen").hide();
     $("#erneut").show();
     });
     
$('#erneut').click(function() {
	var fahrkosten = 0
	  origin = document.getElementById('source').value; //Get the source string
  destination = document.getElementById('destination').value; //Get the destination string
  var service = new google.maps.DistanceMatrixService(); //initialize the distance service
  service.getDistanceMatrix(
    {
      origins: [origin], //set origin, you can specify multiple sources here
      destinations: [destination],//set destination, you can specify multiple destinations here
      travelMode: google.maps.TravelMode.DRIVING, //set the travelmode
      unitSystem: google.maps.UnitSystem.METRIC,//The unit system to use when displaying distance
      avoidHighways: false,
      avoidTolls: false
    }, calcDistance); // here calcDistance is the call back function
	});
 
	



function calcDistance(response, status) {
  if (status != google.maps.DistanceMatrixStatus.OK) { // check if there is valid result
    alert('Error was: ' + status);
  } else {
    var origins = response.originAddresses;
    var destinations = response.destinationAddresses;
	
    for (var i = 0; i < origins.length; i++) {
      var results = response.rows[i].elements;
      for (var j = 0; j < results.length; j++) {
		  distanz = parseFloat(results[j].distance.text)
		var zusatzkosten = 90;
		var zusatzkostentext = ["Pauschalkosten (90.-)"];
		  

	if (distanz < 100) {
		var fahrkosten = distanz*3*2;
	} else {
		var fahrkosten = distanz*3.5*2;
	}	
	if ($('#einweg').is(':checked')) {
		var fahrkosten = fahrkosten/2;
	}
	
	if ($('#luxuspaket').is(':checked')) {
		zusatzkosten = zusatzkosten + 120;
		zusatzkostentext.push(" Luxuspaket (120.-)");
	}
		if ($('#versicherung').is(':checked')) {
		zusatzkosten = zusatzkosten + 100;
		zusatzkostentext.push(" Versicherung (100.-)");
	}
 
	
	function round(number, decimals){
	//Rundet eine Zahl auf eine bestimmte Nachkommastelle
	return Math.round(number * Math.pow(10, decimals)) / Math.pow(10, decimals);
}
zusatzkostentext.toString();
	
		
	var element = document.getElementById("Offerte");
    element.innerHTML = 
"<h3> Offerte: </h3>" + "Entfernung von " + origin + " nach " + destination + ": " + distanz + " Km. " + " " + "<b>Kosten: " + round(fahrkosten, 0) + " CHF</b>." + "<br>" +

"Weitere Kosten: " + "<br>" + zusatzkostentext + "<br>"
    
+ "Die Gesamtkosten belaufen sich auf <b>" + (round(fahrkosten, 0) +zusatzkosten) + " CHF</b>." + "</br>"
+ "<b>Alle Angaben ohne Gewähr!</b>";
	
		
		
		
		
		
      }
    }
  }
}





</script>






    <script src="https://maps.googleapis.com/maps/api/js?callback=initMap"
async defer></script>

</div>


</body>

    <footer class="footer">
      <div class="container">© 2016 Copyright by Nadia Etter, Jenny Zisette und Mauro Walker
        <a href="impressum.html">Impressum</a>
      </div>
</footer>
</html>
